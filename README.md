    随着科技的不断进步，智能家居产品逐渐走进人们的生活，为人们提供更加便捷、舒适的生活体验。风扇作为夏季常用的家电产品，传统风扇功能单一，无法满足用户多样化的需求。本项目旨在设计一款基于 STM32 的智能控制风扇，结合温湿度传感器、语音和云台控制、LCD 显示图案与屏幕交互等技术，实现根据环境自动调节和多种操作方式，提升用户体验和互动性。
一、项目介绍
1.1. 项目背景
  随着科技的不断进步，智能家居产品逐渐走进人们的生活，为人们提供更加便捷、舒适的生活体验。风扇作为夏季常用的家电产品，传统风扇功能单一，无法满足用户多样化的需求。本项目旨在设计一款基于 STM32 的智能控制风扇，结合温湿度传感器、语音和云台控制、LCD 显示图案与屏幕交互等技术，实现根据环境自动调节和多种操作方式，提升用户体验和互动性。
<img width="346" alt="image" src="https://github.com/user-attachments/assets/cf915e9a-f8b3-460d-9a64-05938f93792f" />

图1 项目实物图
1.2. 项目介绍
本项目设计的智能风扇系统具备多种功能模式，包括自动模式、手动模式（锁定和未锁定）、语音交互与控制、OLED 屏显示、LCD屏显示 、LED扇叶显示、按键控制以及通过电机驱动模块控制电机正反转和舵机云台控制电机方向等。该系统能够根据环境温湿度自动调节风扇转速，用户也可通过手动操作、语音指令方式控制风扇的运行状态，实现了智能化和人性化的设计目标。
<img width="439" alt="image" src="https://github.com/user-attachments/assets/a78478a2-9b20-4213-ba76-d60a80811924" />
图2 项目结构框图
二、设计
2.1. 嵌入式硬件设计
硬件组成：本系统主要由STM32F103C8T6单片机、STM32F103ZET6单片机、温湿度传感器（DHT11）、语音模块（天问 51）、电机驱动模块（TB6612）、双轴控键遥感传感器、旋转编码器、舵机、OLED 显示屏、LCD 显示屏、直流电机等组成。各模块协同工作，实现风扇的智能控制功能。
项目工程设计：为了使每一个功能模块都能在单片机中使用，通过cubemax配置好各个功能引脚。
<img width="470" alt="image" src="https://github.com/user-attachments/assets/a6ba4518-51b6-43d1-8f8f-f2a64f582392" />
图3 cubemax引脚配置
原理图设计：根据cubemax的引脚设置来设计 PCB 原理图的接线。确保各模块之间的电气连接正确，信号传输稳定。
![image](https://github.com/user-attachments/assets/ec9afc45-8280-4a76-867e-f98b4ba31d9a)
图4 原理图
PCB 设计与制作：根据原理图设计 PCB 布局，考虑电磁干扰、散热等因素，优化 PCB 布线。完成 PCB 打板后，进行焊接和组装，将各元器件安装到 PCB 板上，制作出硬件实物。
<img width="248" alt="image" src="https://github.com/user-attachments/assets/a3b0d275-936c-400a-830d-00c44bd211d8" />
图5 PCB布局
3D打印：为了让风扇电机可以放置到云台上，我设计了一个电机外壳。
<img width="233" alt="image" src="https://github.com/user-attachments/assets/a649013f-9faa-4c2e-a004-037588ff34a4" />
图6 电机外壳
四、总结与心得
4.1 项目总结
  本项目成功实现了基于 STM32 的智能控制风扇的设计与制作，集成了多种功能，达到了预期的设计目标。通过温湿度传感器实现了自动调节风扇转速，提高了用户舒适度；语音控制和屏幕交互功能增强了产品的智能化和人性化程度；硬件设计合理，软件功能稳定，各模块协同工作良好。
4.2 项目不足与展望
不足之处
  未能实现扇叶图案与交互屏的功能。原计划通过界面动态显示温湿度，但在将 stm32f103c8t6 的温湿度数据通过 usart 发送给 stm32f103zet6 时，stm32f103zet6 的 usart 的 receive 功能卡死在 HAL_BUSY，导致数据传输失败，无法实现该功能。此外，由于时间限制，未实现旋转扇叶产生视觉暂留的图像，原因包括无法实现霍尔的激发（电机磁场不够）、无线供电未搭建以及现有电机扭矩小无法带动 LCD 扇叶转动。
展望未来
  首先，将上面的不足之处进行修改。进一步优化硬件设计，选择性能更优的电机和传感器，提高系统的稳定性和可靠性。同时，完善无线供电模块的搭建，解决 LCD 扇叶转动的动力问题，实现旋转扇叶产生视觉暂留图像的功能，提升产品的趣味性和创新性。
